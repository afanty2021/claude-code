[根目录](../../CLAUDE.md) > [plugins](../) > **code-review**

# Code Review Plugin

## 模块职责

为 Pull Request 提供自动化代码审查功能，使用多个专用代理和基于置信度的评分机制来过滤误报，确保高质量的代码审查。

## 入口与启动

### 插件元数据
- **配置文件**: `.claude-plugin/plugin.json`
- **版本**: 1.0.0
- **作者**: Boris Cherny (boris@anthropic.com)

### 核心组件结构
```
code-review/
├── .claude-plugin/plugin.json    # 插件元数据
├── README.md                     # 插件文档
└── commands/                     # 斜杠命令
    └── code-review.md           # 代码审查命令
```

## 对外接口

### 主要命令
- **`/code-review`**: 自动化 PR 审查工作流
  - 启动多个专用代理进行并行分析
  - 使用置信度评分 (≥80%) 过滤误报
  - 生成综合性审查报告

### 审查流程
1. **准备阶段**: 获取 PR 信息和变更文件
2. **并行审查**: 启动多个专业代理
3. **置信度过滤**: 只保留高置信度问题
4. **报告生成**: 整合结果并提供可操作建议

## 关键依赖与配置

### 依赖要求
- GitHub CLI (`gh`) - 用于 PR 信息获取
- Git 工具 - 用于差异分析
- Claude Code 环境 - 用于代理执行

### 配置参数
- **置信度阈值**: 80% (默认)
- **审查范围**: 可配置文件类型和目录
- **并行度**: 支持多代理并行执行

## 数据模型

### 审查结果模型
```json
{
  "confidence": 0.85,
  "severity": "high|medium|low",
  "category": "bugs|performance|style|security",
  "description": "问题描述",
  "file_path": "文件路径",
  "line_number": 行号,
  "suggestion": "修复建议"
}
```

### 报告结构
- **关键问题**: 必须修复的高优先级问题
- **重要问题**: 建议修复的中优先级问题
- **改进建议**: 可选的低优先级建议
- **积极观察**: 代码中的优秀实践

## 测试与质量

### 质量保证机制
- **置信度评分**: 减少误报，提高审查效率
- **多代理协作**: 不同专业角度的全面分析
- **阈值配置**: 可根据项目需求调整敏感度

### 审查维度
- **代码质量**: 可读性、可维护性
- **功能正确性**: 逻辑错误、边界情况
- **性能考量**: 算法效率、资源使用
- **安全性**: 潜在安全漏洞
- **项目约定**: 编码规范、最佳实践

## 常见问题 (FAQ)

**Q: 置信度阈值是如何计算的？**
A: 基于代理的分析确定性、代码上下文清晰度和历史准确率综合计算。

**Q: 可以自定义审查规则吗？**
A: 当前版本使用内置规则，可以通过修改代理定义来扩展功能。

**Q: 支持哪些编程语言？**
A: 支持 Claude Code 能够分析的所有主流编程语言。

**Q: 如何处理误报？**
A: 通过 80% 的置信度阈值自动过滤大部分误报，同时提供反馈机制改进准确性。

## 相关文件清单

### 核心文件
- `.claude-plugin/plugin.json` - 插件配置
- `README.md` - 详细文档和使用指南
- `commands/code-review.md` - 主要命令实现

### 文档内容
- 审查流程说明
- 使用示例和最佳实践
- 配置选项说明

## 变更记录 (Changelog)

### 2025-11-18 16:43:03 - 初始化文档
- 创建模块级 CLAUDE.md 文档
- 分析插件架构和审查机制
- 生成导航面包屑和功能说明

---

## 模块覆盖状态

**扫描统计**：
- 总文件数：3
- 已扫描文件数：3
- 覆盖率：100%

**关键文件分析**：
- ✅ plugin.json - 插件元数据完整
- ✅ README.md - 文档详细，包含使用指南
- ✅ code-review.md - 命令定义和审查流程清晰

**功能缺口**：无，插件功能完整且文档齐全。