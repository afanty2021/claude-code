[根目录](../../CLAUDE.md) > [plugins](../) > **feature-dev**

# Feature Development Plugin

## 模块职责

提供结构化的 7 阶段功能开发工作流，配备专用代理进行代码库探索、架构设计和代码审查，确保新功能开发的高质量和系统性。

## 入口与启动

### 插件元数据
- **配置文件**: `.claude-plugin/plugin.json`
- **版本**: 1.0.0
- **作者**: Anthropic

### 核心组件结构
```
feature-dev/
├── .claude-plugin/plugin.json    # 插件元数据
├── README.md                     # 插件文档
├── commands/                     # 斜杠命令
│   └── feature-dev.md           # 功能开发命令
└── agents/                       # 专用代理
    ├── code-explorer.md         # 代码库探索代理
    ├── code-architect.md        # 架构设计代理
    └── code-reviewer.md         # 代码审查代理
```

## 对外接口

### 主要命令
- **`/feature-dev [功能描述]`**: 引导式功能开发工作流
  - 接受可选的功能描述参数
  - 启动完整的 7 阶段开发流程
  - 协调多个专用代理

### 专用代理

#### code-explorer - 代码库探索代理
- **功能**: 深度分析现有代码库功能
- **专业**: 理解代码结构、模式和架构
- **输出**: 关键文件列表和实现模式

#### code-architect - 架构设计代理
- **功能**: 设计功能架构和实现蓝图
- **专业**: 组件设计、数据流、集成点
- **输出**: 详细的实现计划和文件结构

#### code-reviewer - 代码审查代理
- **功能**: 审查代码质量、错误和项目约定
- **专业**: 错误检测、质量评估、最佳实践
- **输出**: 可操作的改进建议

## 开发工作流

### 阶段 1: 发现 (Discovery)
**目标**: 理解需要构建的功能
- 解析初始需求和功能描述
- 询问用户明确需求细节
- 总结理解并获得确认

### 阶段 2: 代码库探索 (Codebase Exploration)
**目标**: 深入理解相关现有代码和模式
- 并行启动 2-3 个 code-explorer 代理
- 从不同角度分析代码库架构
- 阅读代理识别的关键文件
- 提供综合性发现摘要

### 阶段 3: 澄清问题 (Clarifying Questions)
**目标**: 在设计前解决所有模糊不清的问题
- 分析代码库发现和原始需求
- 识别未明确的边界情况、错误处理等
- 向用户提出完整的澄清问题列表
- 等待用户回答后再进行架构设计

### 阶段 4: 架构设计 (Architecture Design)
**目标**: 设计多种实现方案并进行权衡
- 并行启动 2-3 个 code-architect 代理
- 评估不同方案：最小变更、清晰架构、实用平衡
- 向用户展示方案对比和建议
- 获得用户对选定方案的确认

### 阶段 5: 实现 (Implementation)
**目标**: 构建功能
- 等待用户明确批准
- 阅读相关文件并遵循选定架构
- 严格按照代码库约定实现
- 使用 TodoWrite 跟踪进度

### 阶段 6: 质量审查 (Quality Review)
**目标**: 确保代码简洁、DRY、优雅且正确
- 并行启动 3 个 code-reviewer 代理
- 重点关注简洁性、错误、约定遵循
- 整合发现并提出修复建议
- 根据用户决定处理问题

### 阶段 7: 总结 (Summary)
**目标**: 记录完成的工作
- 标记所有待办事项完成
- 总结构建内容、关键决策、修改文件
- 提出后续步骤建议

## 关键依赖与配置

### 依赖要求
- Claude Code 环境 - 用于代理执行
- 完整的代码库访问权限 - 用于分析
- Git 工具 - 用于版本控制操作

### 配置参数
- **代理并行度**: 支持同时运行多个代理
- **阶段控制**: 可跳过某些阶段或定制流程
- **权限要求**: 需要文件读写权限

## 数据模型

### 工作流状态模型
```json
{
  "phase": "当前阶段",
  "status": "进行中|已完成|等待用户",
  "findings": "发现摘要",
  "architecture": "选定架构",
  "todos": ["待办事项列表"]
}
```

### 代理输出模型
- **文件列表**: 推荐读取的关键文件
- **模式识别**: 现有代码模式和建议
- **实现计划**: 具体的文件和函数建议

## 测试与质量

### 质量保证机制
- **多代理协作**: 不同专业角度的全面分析
- **用户确认**: 关键决策点的用户参与
- **渐进式验证**: 每个阶段的质量检查

### 最佳实践遵循
- **代码库约定**: 严格遵循现有模式
- **架构一致性**: 确保与现有架构协调
- **可维护性**: 优先考虑长期维护性

## 常见问题 (FAQ)

**Q: 如何处理用户说"你觉得最好"的情况？**
A: 提供明确的建议和理由，获得用户的明确确认。

**Q: 可以跳过某些阶段吗？**
A: 不建议跳过，每个阶段都有其重要价值，但可以根据情况调整深度。

**Q: 代理并行执行会不会产生冲突？**
A: 代理从不同角度分析，结果由主流程整合，避免冲突。

**Q: 如何保证实现质量？**
A: 通过多阶段的验证和多个代理的审查来确保质量。

## 相关文件清单

### 核心文件
- `.claude-plugin/plugin.json` - 插件配置
- `README.md` - 详细文档
- `commands/feature-dev.md` - 主要命令实现
- `agents/code-explorer.md` - 探索代理定义
- `agents/code-architect.md` - 架构代理定义
- `agents/code-reviewer.md` - 审查代理定义

### 工作流特性
- 完整的 7 阶段流程
- 多代理协作机制
- 用户交互和确认点

## 变更记录 (Changelog)

### 2025-11-18 16:43:03 - 初始化文档
- 创建模块级 CLAUDE.md 文档
- 详细分析 7 阶段开发工作流
- 记录代理功能和工作流机制
- 生成导航面包屑和使用指南

---

## 模块覆盖状态

**扫描统计**：
- 总文件数：5
- 已扫描文件数：5
- 覆盖率：100%

**关键文件分析**：
- ✅ plugin.json - 插件元数据完整
- ✅ README.md - 文档详细
- ✅ feature-dev.md - 工作流定义完整，包含 7 个阶段
- ✅ code-explorer.md - 探索代理功能明确
- ✅ code-architect.md - 架构代理专业性强
- ✅ code-reviewer.md - 审查代理全面覆盖

**功能缺口**：无，工作流完整且代理功能齐全。